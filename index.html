<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Miew via Global</title>
  
  <link rel="stylesheet" href="node_modules/miew/dist/Miew.min.css">
  <script src="https://unpkg.com/babel-polyfill@6.26.0/dist/polyfill.min.js"></script>
  <script src="node_modules/miew/dist/Miew.min.js"></script>
</head>
<body>
	<div id="miew-menu"> 
		<div id="miew-colorers">
			colors
		</div>
		<div id="miew-modes">
			Modes
		</div>
	</div>
		
	<div class="miew-container" style="width:640px; height:480px"></div>




  <script>
    (function() {

		var viewer = new Miew({
			container: document.getElementsByClassName('miew-container')[0],
			load: '2CRN',
			reps: [{
			  mode: 'QS',
			}, {
			  selector: 'elem S',
			//   mode: 'BS', //idk what this is
			  material: 'TR',
			  colorer: ['UN', { color: 0xBADA55 }],
			}],
			settings: {
			  autoRotation: 0, //-0.5 for spinning
			  theme: 'light',
			  axes: false,
			  fps: false,
			},
		  });

		const modes = Miew.modes.descriptions
		const colorers = Miew.colorers.descriptions

		colorers.forEach((color) => {
			var button = document.createElement("button");
			button.value = color.id;

			button.onclick = changeColor;

			var buttonText = document.createTextNode(color.name);
			button.appendChild(buttonText)
			document.getElementById("miew-colorers").appendChild(button)
		})

		modes.forEach((mode) => {
			var button = document.createElement("button");
			button.value = mode.id;

			button.onclick = changeMode;

			var buttonText = document.createTextNode(mode.name);
			button.appendChild(buttonText)
			document.getElementById("miew-modes").appendChild(button)
		})

		function changeColor() {
			console.log(this.value)
		}

		function changeMode() {
			var mode = this.value;
			//idk what to do here.....
			// console.log(mode)
			// viewer.load("6FT2") //this reloads a protein but with default settings?
			
			viewer.run();
		}



      if (viewer.init()) {
        viewer.run();
	  }
	  

	  


	  
    })();
  </script>
</body>
</html>